/* --- style.css --- */
:root{
  --bg1:#3f3f3f; --bg2:#e5b85a; --bg3:#6f6f6f;
  --accent:#f2b84c; --danger:#ff6b6b; --play:#4cd137;
  --text:#ffffff; --text-dark: #3e3e3e; --panel-bg: rgba(255, 255, 255, 0.95);
  --shadow:0 18px 60px rgba(0,0,0,.35);
  --radius:16px;
  --font: 'Mochiy Pop One', sans-serif;
  
  --c1: #ff4757; --c2: #ffa502; --c3: #eccc68; --c4: #2ed573;
  --c5: #1e90ff; --c6: #3742fa; --c7: #a55eea;

  /* EX Mode Colors */
  --ex-bg1: #0f0c29;
  --ex-bg2: #302b63;
  --ex-bg3: #24243e;
  --ex-title: #ff6b81;
  
  --bg-cold-1: #1e3c72; --bg-cold-2: #2a5298; --bg-cold-3: #a8c0ff;
  --bg-burn-1: #200122; --bg-burn-2: #6f0000; --bg-burn-3: #c0392b;
  --bg-oak-1: #2d3436; --bg-oak-2: #1e1e1e;
  --bg-water-1: #00416a; --bg-water-2: #006994; --bg-water-3: #7fb2cc;

  --fanmade-primary: #a29bfe;
  --fanmade-bg: #0c0c16;
}

*{ box-sizing:border-box; }
html,body{ height:100%; width: 100%; }
body{
  margin:0; font-family:var(--font); color:var(--text);
  /* iOS/Android ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ä¼¸ç¸®ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒæºã‚Œã¦æ‹¡å¤§ç‡ãŒå¤‰ã‚ã‚‹ã®ã‚’é˜²ã */
  height: 100vh;
  height: 100svh;
  min-height: 100vh;
  min-height: 100svh;
  background:#111; overflow:hidden; user-select:none;
  touch-action: none; /* ã‚¹ãƒãƒ›ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚„ã‚ºãƒ¼ãƒ ã‚’æŠ‘åˆ¶ */
  overscroll-behavior: none;
}

/* Safe-area padding for notches/home bar */
:root{
  --sat: env(safe-area-inset-top);
  --sar: env(safe-area-inset-right);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
}
.topbar{
  padding-top: calc(var(--sat) * 0.9);
  height: calc(60px + var(--sat) * 0.9);
  padding-left: calc(20px + var(--sal));
  padding-right: calc(20px + var(--sar));
}

/* Play UI safe-area (PC/Default) */
.play-controls{
  left: calc(20px + var(--sal));
  top: calc(70px + var(--sat));
}
.play-timer-area{
  right: calc(20px + var(--sar));
  top: calc(70px + var(--sat));
}

/* Flash Reset Effect */
body::after {
  content: ""; position: fixed; inset: 0; background: #fff;
  opacity: 0; pointer-events: none; z-index: 9999;
  transition: opacity 0.5s ease-out;
}
body.flash-reset::after { opacity: 1; transition: none; }

/* Screens */
.screen{ position:absolute; inset:0; display:none; opacity:0; pointer-events:none; transition: opacity 0.4s ease, transform 0.4s ease; }
.screen.screen--active{ display:block; opacity:1; pointer-events:auto; transform: scale(1); }

/* Background & Titles */
.bg{ 
  position:absolute; inset:-20%; 
  background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 42%, var(--bg3) 100%); 
  filter:saturate(1.05); 
  transition: background 1.5s ease;
}
.bg::after{ content:""; position:absolute; inset:0; background: radial-gradient(circle at 72% 40%, rgba(255,255,255,.12), transparent 55%), repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0 1px, transparent 1px 9px); mix-blend-mode: overlay; opacity:.65; }

/* EX Mode Background (Space) */
.bg.ex-mode {
  background: linear-gradient(180deg, var(--ex-bg1) 0%, var(--ex-bg2) 50%, var(--ex-bg3) 100%);
}

/* Space Particles */
.space-stars {
  position: absolute; inset: 0; pointer-events: none;
  opacity: 0; transition: opacity 1.5s ease;
}
.space-stars.active { opacity: 1; }
.star {
  position: absolute; background: #fff; border-radius: 50%;
  animation: spaceFloat infinite linear;
}

@keyframes spaceFloat {
  0% { opacity: 0; transform: translateY(0) scale(0.5); }
  20% { opacity: 1; transform: translateY(-20px) scale(1.2); }
  80% { opacity: 0.8; transform: translateY(-80px) scale(1); }
  100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
}

.titleWrap{ position:relative; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; perspective: 1200px; }
.screen--shatter .logoStage, .screen--shatter .menu { transition: transform 0.8s cubic-bezier(0.1, 0.9, 0.2, 1), opacity 0.5s ease; pointer-events: none; }
.logoStage{ position:relative; width: min(860px, 90vw); margin: 0 auto; z-index: 10; margin-top: clamp(-80px, -10vh, -20px); }
.logoCanvas, .logoFallback{ width: 100%; height: auto; display: block; filter: drop-shadow(0 14px 30px rgba(0,0,0,.25)); }
.logoFallback{ display:none; }
.logoCanvas{ opacity:0; transform: translateY(20px) scale(.985); background: transparent; }
#titleScreen.is-logo-running .logoCanvas{ animation: logoPop 900ms cubic-bezier(.18,.9,.2,1) forwards, logoFloat 3200ms ease-in-out 980ms infinite; }
#titleScreen.is-logo-done .logoCanvas{ opacity:1; transform:translateY(0) scale(1); animation: logoFloat 3200ms ease-in-out infinite; }
.menu{ margin-top: -20px; display:flex; flex-direction: column; gap: 30px; z-index: 10; transform-style: preserve-3d; transform: rotateX(55deg) rotateZ(35deg); opacity:0; pointer-events:none; transition: opacity .35s ease, transform .35s ease; }
#titleScreen.is-logo-done .menu{ opacity:1; pointer-events:auto; }

.btn3d{ border:none; background:transparent; padding:0; cursor:pointer; display:flex; gap:15px; position:relative; transform-style:preserve-3d; transition:transform 0.2s ease; }
.btn3d::before { content:""; position:absolute; inset:-30px; transform:translateZ(0); }
#btnEditor { padding-left: 80px; }
.btn3d span{ display:flex; justify-content:center; align-items:center; position:relative; width:clamp(40px, 11vmin, 110px); height:clamp(40px, 11vmin, 110px); background:#fdfdfd; border:2px solid #ddd; border-radius:12px; box-shadow: 1px 1px 0 #bbb, 2px 2px 0 #bbb, 3px 3px 0 #bbb, 4px 4px 0 #bbb, 5px 5px 0 #bbb, 15px 15px 30px rgba(0,0,0,0.3); transform-style:preserve-3d; transition:transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), background 0.2s; pointer-events:auto; }
.btn3d span b { display:block; font-size:clamp(24px, 7vmin, 64px); color:#888; text-shadow:1px 1px 0px rgba(255,255,255,0.8); transform:rotateZ(-35deg); position:relative; top:2px; }
.btn3d:hover span{ background:#fff; border-color:#ccc; transform:translateZ(10px); }
.btn3d:hover span b{ color:#666; }
.btn3d:active span{ transform:translateZ(4px)!important; box-shadow:1px 1px 0 #bbb, 4px 4px 10px rgba(0,0,0,0.2); transition-delay:0s!important; }
.hint{ margin-top:clamp(60px, 15vh, 120px); color:var(--text); font-size:13px; z-index:1; transform:rotateX(20deg); opacity:0.8; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

/* Title Action Buttons (å³ä¸Šå·¨å¤§ãƒœã‚¿ãƒ³) */
.title-action-buttons {
  position: absolute;
  top: 30px;
  right: 30px;
  display: flex;
  gap: 20px;
  z-index: 100;
}
.title-top-btn {
  width: 80px;  /* å·¨å¤§åŒ– */
  height: 80px; /* å·¨å¤§åŒ– */
  font-size: 40px; /* çµµæ–‡å­—ã‚µã‚¤ã‚ºã‚¢ãƒƒãƒ— */
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  border: 2px solid rgba(255,255,255,0.3);
  cursor: pointer;
  backdrop-filter: blur(10px);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}
.title-top-btn:hover {
  background: rgba(255,255,255,0.3);
  transform: scale(1.1) rotate(10deg);
  box-shadow: 0 15px 30px rgba(0,0,0,0.4);
}

/* Global Settings Modal */
.volume-control {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 20px;
}
.volume-control label {
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-weight: bold;
}
.volume-control input[type="range"] {
  width: 100%;
}

/* Patch Notes Modal */
.patch-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.patch-item {
  background: #f9f9f9;
  border: 1px solid #ddd;
  padding: 15px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.patch-item:hover {
  background: #fff;
  border-color: var(--accent);
  transform: translateX(5px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.patch-info h4 { margin: 0; font-size: 16px; color: #333; }
.patch-info p { margin: 4px 0 0; font-size: 12px; color: #777; }
.patch-date { font-size: 12px; color: #999; font-family: monospace; }
.patch-detail { animation: fadeIn 0.3s ease; }
.patch-detail.hidden { display: none; }
.patch-content-list { padding-left: 20px; line-height: 1.8; color: #444; }
.patch-content-list li { margin-bottom: 5px; }

/* Update Notice Modal */
.update-notice-body {
  text-align: left;
  background: #fafafa;
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #eee;
}
.update-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 5px; }
.update-header h2 { margin: 0; color: var(--accent); font-size: 28px; }
.update-header span { color: #888; font-size: 14px; }
.update-sub { font-weight: bold; color: #555; margin-top: 0; margin-bottom: 15px; }

/* Level List UI */
.editor-menu-container { position: absolute; inset: 0; top: 60px; display: flex; gap: 24px; padding: 20px 40px 40px; max-width: 1200px; margin: 0 auto; }
.editor-menu-container.center-layout { justify-content: center; }
.level-list-section { flex: 1; display: flex; flex-direction: column; background: var(--panel-bg); color: var(--text-dark); border-radius: var(--radius); padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
.level-list-section.full-width { max-width: 800px; width: 100%; margin: 0 auto; flex: none; height: 80%; }
.section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.section-header h3 { margin: 0; color: #5a4a2d; font-size: 18px; }
.list-actions { display: flex; gap: 10px; }
.level-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 4px; }
/* style.css ã®ä¸­ã»ã© */

.level-list.grid-list { 
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
  gap: 20px; 
  padding-bottom: 40px; 
  
  /* â–¼â–¼â–¼ ã“ã‚Œã‚’è¿½è¨˜ã—ã¦ç¸¦ä¼¸ã³ã‚’é˜²ãã¾ã™ â–¼â–¼â–¼ */
  align-content: start;
  grid-auto-rows: max-content;
}
/* Level Item */
.level-item { background: #fff; border: 2px solid #eee; padding: 12px 16px; border-radius: 10px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.15s; color: var(--text-dark); }
.level-item:hover { border-color: #ddd; background: #fafafa; transform: translateX(2px); }
.level-item.active { border-color: var(--accent); background: #fffcf0; box-shadow: 0 0 0 2px rgba(242, 184, 76, 0.3); }
.level-info h4 { margin: 0; font-size: 16px; }
.level-info p { margin: 2px 0 0; font-size: 12px; color: #888; }
.level-item.official {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 15px 10px 20px; /* ä¸‹ã«ãƒãƒƒã‚¸ãŒå…¥ã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
  min-height: 160px;       /* é«˜ã•ã‚’å°‘ã—åºƒã’ã¦ã¯ã¿å‡ºã—é˜²æ­¢ */
  position: relative;
  overflow: hidden;        /* ã¯ã¿å‡ºã—ã‚’ã‚«ãƒƒãƒˆã€ã¾ãŸã¯å†…éƒ¨ã«åã‚ã‚‹ */
  transition: background 0.3s, border-color 0.3s;
  transform-style: preserve-3d; /* ç«‹ä½“çš„ãªå›è»¢ã‚’è¨±å¯ */
  backface-visibility: hidden;
}


.level-item.official h4 { font-size: 24px; color: #555; margin: 0; line-height: 1.2; }
.level-item.official p { display: none; }
.level-item.official .sub-title { font-size: 15px !important; color: #777; white-space: normal; line-height: 1.4; font-weight: bold; margin-top: 4px; }
.level-item.official .author-name { font-size: 11px; color: #999; margin-top: 6px; font-style: italic; }

.level-item.official.ex { border-color: #ff4757; background: #fff5f5; box-shadow: 0 0 10px rgba(255, 71, 87, 0.2); }
.level-item.official.ex h4 { color: #d63031; }
.level-item.official.cleared { border-color: var(--play); background: #f0fff4; }
.level-item.official.cleared::after { content: "â˜…"; position: absolute; top: 5px; right: 5px; color: #f1c40f; font-size: 18px; }
.level-item.official.locked { filter: grayscale(1); opacity: 0.6; background: #ddd; }
.level-item.official:hover { transform: translateY(-3px); }

.level-details-section { flex: 1; display: flex; flex-direction: column; justify-content: center; }
.details-card { background: var(--panel-bg); color: var(--text-dark); border-radius: var(--radius); padding: 30px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); display: flex; flex-direction: column; gap: 20px; animation: slideIn 0.3s ease; }
.details-card.hidden { display: none; }
.details-header h2 { margin: 0; font-size: 28px; line-height: 1.2; color: #444; }
.details-header p { margin: 5px 0; color: #b8860b; font-weight: bold; }
.detail-meta-grid { margin-top: 10px; font-size: 13px; color: #666; display: flex; flex-direction: column; gap: 4px; }
.preview-box { width: 100%; height: 200px; background: #ddd; border-radius: 12px; display: grid; place-items: center; font-size: 15px; color: #888; border: 4px dashed #ccc; box-shadow: inset 0 0 20px rgba(0,0,0,0.05); }
.details-actions { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-top: 10px; }
.no-selection { text-align: center; color: rgba(255,255,255,0.8); background: rgba(0,0,0,0.2); padding: 40px; border-radius: var(--radius); }

/* Buttons */
.btn { border:0; border-radius:999px; padding:12px 24px; font-weight:900; letter-spacing:.05em; font-family: var(--font); cursor:pointer; background:rgba(255,255,255,.2); color:#fff; backdrop-filter:blur(10px); box-shadow:0 4px 10px rgba(0,0,0,0.2); transition:all 0.15s ease; }
.btn.dark { background: #444; color: #fff; }
.btn.dark:hover { background: #222; }
.btn:hover{ transform:translateY(-2px); background:rgba(255,255,255,.3); }
.btn:active{ transform:translateY(0); }
.btn.primary{ background:var(--accent); color:#4e3600; }
.btn.primary:hover{ background:#ffc857; }
.btn.small{ padding:8px 16px; font-size:13px; }
.btn.action-play { background: var(--play); color: #fff; }
.btn.action-edit { background: #fff; color: #444; border: 2px solid #ddd; }
.btn.action-delete { background: #ffeaea; color: var(--danger); border: 2px solid #ffcccc; }
.btn.danger { background: #ff4757; color: #fff; }
.btn.skip { background: #9b59b6; color: #fff; }
.btn.skip:hover { background: #8e44ad; }

/* Modal */
.modal { background: #fff; color: #333; border: none; border-radius: var(--radius); padding: 30px; width: min(450px, 95vw); box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
.modal::backdrop { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
.modal h3 { text-align: center; color: #5a4a2d; margin-top: 0; }
.modal p { text-align: center; line-height: 1.6; }
.modal form input, .modal form select { width: 100%; padding: 12px; background: #f5f5f5; border: 2px solid #ddd; border-radius: 8px; color: #333; font-family: var(--font); margin-bottom: 15px; font-weight: bold; }
.modal form label span { font-size: 13px; color: #666; display: block; margin-bottom: 5px; font-weight: bold; }
.slide-modal { position: fixed; top: 0; right: 0; bottom: 0; left: auto; width: 400px; height: 100%; margin: 0; transform: translateX(100%); transition: transform 0.3s ease; background: #fdfdfd; box-shadow: -10px 0 40px rgba(0,0,0,0.3); border-radius: 0; display: flex; flex-direction: column; }
.slide-modal[open] { transform: translateX(0); }
.modal-header { padding: 20px; background: #eee; display: flex; justify-content: space-between; align-items: center; }
.btn-close { border: none; background: none; font-size: 24px; cursor: pointer; color: #888; }
.modal-body { padding: 20px; overflow-y: auto; flex: 1; color: var(--text-dark); }
.modal-footer { margin-top: 20px; text-align: right; }

/* Editor UI */
.editor-topbar { padding-right: 280px; }
.editor-info-area { display: flex; align-items: center; gap: 20px; }
.editor-timer { font-size: 14px; color: #fff; font-family: monospace; background: rgba(0,0,0,0.3); padding: 4px 10px; border-radius: 6px; }
.editor-top-actions { display: flex; gap: 10px; }
.editor-palette { position: absolute; right: 20px; top: 80px; bottom: 100px; width: 220px; background: var(--panel-bg); color: var(--text-dark); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); display: flex; flex-direction: column; transition: 0.3s ease; z-index: 500; }
.editor-palette.minimized { height: 50px; overflow: hidden; }
.palette-header { padding: 12px 16px; background: #eee; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
.palette-content { padding: 16px; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
.palette-item { display: flex; align-items: center; gap: 12px; padding: 10px; background: #fff; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; transition: 0.1s; text-align: left; }
.palette-item:hover { background: #f9f9f9; transform: translateX(2px); }
.palette-item.active { border-color: var(--accent); background: #fffcf0; box-shadow: 0 0 0 2px rgba(242,184,76,0.4); }
.preview-tile { width: 32px; height: 32px; border-radius: 4px; border: 1px solid #ccc; display: grid; place-items: center; font-weight: bold; font-size: 14px; position:relative; overflow:hidden;}
.editor-bottom-actions { position: absolute; bottom: 30px; left: 30px; right: 260px; display: flex; justify-content: space-between; pointer-events: none; }
.editor-bottom-actions button { pointer-events: auto; }
.big-btn { padding: 16px 40px; font-size: 18px; box-shadow: 0 8px 20px rgba(0,0,0,0.4); }
#btnTestPlay { background: var(--play); color: #fff; }
.test-play-ui { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); padding: 15px 30px; border-radius: 50px; display: flex; flex-direction: column; gap: 5px; align-items: center; z-index: 1000; border: 2px solid var(--play); text-align: center; }
.test-play-ui.hidden { display: none; }
.test-msg { color: #fff; font-weight: bold; }

/* Play Hint Button */
.hint-btn { 
  /* position, top, left ãªã©ã‚’å‰Šé™¤ */
  display: flex; 
  align-items: center; 
  gap: 6px; 
  background: #f1c40f; /* è¦–èªæ€§ã®é«˜ã„é»„è‰² */
  color: #333;
}
.hint-btn:hover {
  background: #f39c12;
}

/* éè¡¨ç¤ºç”¨ã‚¯ãƒ©ã‚¹ */
.hint-btn.hidden { display: none; }

/* Hint View Modal */
.play-hint-list { display: flex; flex-direction: column; gap: 12px; max-height: 300px; overflow-y: auto; text-align: left; }
.hint-row { background: #f5f5f5; padding: 10px; border-radius: 8px; border: 1px solid #ddd; }
.hint-label { font-size: 11px; color: #888; font-weight: bold; margin-bottom: 4px; }
.hint-content { font-size: 14px; font-weight: bold; background: #333; color: #333; padding: 4px 8px; border-radius: 4px; cursor: pointer; user-select: none; transition: all 0.3s; }
.hint-content:hover { background: #444; }
.hint-content.revealed { background: transparent; color: #333; cursor: default; }

/* Editor Hints Settings */
.hints-list-editor { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
.editor-hint-row { display: flex; gap: 8px; align-items: center; }
.editor-hint-row span { font-size: 12px; font-weight: bold; width: 20px; }
.editor-hint-row input { margin-bottom: 0 !important; flex: 1; }

/* Stage */
.editor-stage {
  position: absolute; inset: 0;
  display: flex; justify-content: center; align-items: center;
  perspective: 1000px;
}
.editor-grid {
  display: grid; grid-template-columns: repeat(var(--cols,8), 1fr); gap: 2px;
  transform-style: preserve-3d;
  transform: scale(var(--gridScale, 1.5)) rotateX(55deg) rotateZ(45deg);
  background: rgba(0,0,0,0.2); padding: 10px; border-radius: 4px;
  transition: transform 0.5s ease; position: relative;
  transform-origin: 50% 50%;
}
.tile { width: 50px; height: 50px; background: #eee; border-radius: 2px; cursor: pointer; position: relative; box-shadow: 1px 1px 0 #bbb, 2px 2px 0 #bbb; transition: transform 0.1s, filter 0.1s; transform-style: preserve-3d; }
.tile:hover { transform: translateZ(10px); background: inherit; filter: brightness(1.15); box-shadow: inset 0 0 0 2px rgba(255,255,255,0.8); z-index: 50; }



/* Background Variants */
.bg.cold {
  background: linear-gradient(180deg, var(--bg-cold-1) 0%, var(--bg-cold-2) 40%, var(--bg-cold-3) 100%);
}
.bg.dark-oak {
  /* ãƒ™ãƒ¼ã‚¹ã®èŒ¶è‰²ï¼ˆãƒ•ãƒ­ãƒ¼ãƒªãƒ³ã‚°è‰²ï¼‰ */
  background-color: #e0ac69;
  
  background-image: 
    /* æœ¨ç›®ã®è³ªæ„Ÿï¼ˆå¾®ç´°ãªãƒã‚¤ã‚ºï¼‰ */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E"),
    /* æ¿ã®å¢ƒç•Œç·šï¼ˆæ¨ªç·šï¼‰: 60pxé–“éš”ã§æ¿ƒã„èŒ¶è‰²ã®ç·šã‚’å…¥ã‚Œã‚‹ */
    linear-gradient(to bottom, transparent 58px, rgba(90, 45, 10, 0.3) 59px, rgba(90, 45, 10, 0.3) 60px);

  /* èƒŒæ™¯ã‚µã‚¤ã‚º: ãƒã‚¤ã‚ºç”»åƒã¨ãƒœãƒ¼ãƒ€ãƒ¼ã®é–“éš” */
  background-size: 200px 200px, 100% 60px;
  
  /* ç”»é¢ç«¯ã‚’å°‘ã—æš—ãã—ã¦é›°å›²æ°—ã‚’å‡ºã™ãƒ“ãƒãƒƒãƒˆåŠ¹æœ */
  box-shadow: inset 0 0 150px rgba(80, 40, 10, 0.6);
}
/* Burning Animation */
.bg.burning {
  background: linear-gradient(180deg, var(--bg-burn-1) 0%, var(--bg-burn-2) 50%, var(--bg-burn-3) 100%);
}
.burning-overlay {
  position: absolute; inset: 0; pointer-events: none; opacity: 0; transition: opacity 1s;
  background-image: radial-gradient(circle, rgba(255,200,0,0.1) 10%, transparent 20%);
  background-size: 50px 50px;
  mix-blend-mode: plus-lighter;
  animation: burningFloat 4s infinite linear;
}
.burning-overlay.active { opacity: 1; }

@keyframes burningFloat {
  0% { transform: translateY(0) scale(1); filter: hue-rotate(0deg); }
  50% { filter: hue-rotate(-20deg); }
  100% { transform: translateY(-100px) scale(1.1); filter: hue-rotate(0deg); }
}

.hidden {
  display: none !important;
}

/* --- ä¿®æ­£: æ°´ä¸­èƒŒæ™¯ (ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã«è² ã‘ãªã„ã‚ˆã† !important ã‚’ä»˜ä¸) --- */
div.bg.underwater {
  /* æ·±æµ·ã®ã‚ˆã†ãªé’ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¼·åˆ¶é©ç”¨ */
  background: radial-gradient(circle at 50% 20%, #4facfe 0%, #00f2fe 10%, #00416a 60%, #001021 100%) !important;
}

/* --- ä¿®æ­£: æ°´ä¸­ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ (æ˜ã‚‹ã•ã¨è‰²å‘³ã®èª¿æ•´) --- */
.underwater-overlay {
  background: 
    /* å…‰ã®ç­‹ */
    repeating-linear-gradient(90deg, rgba(255,255,255,0.05) 0, transparent 2px, transparent 150px),
    /* å…¨ä½“ã®é’ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
    linear-gradient(180deg, rgba(0,100,255,0.1) 0%, rgba(0,0,50,0.4) 100%) !important;
  mix-blend-mode: screen; 
  opacity: 0.8 !important;
  pointer-events: none;
}

.distortion-effect {
  filter: url(#displacementFilter);
  /* hue-rotate ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚ã“ã‚Œã§é’è‰²ãŒç¶­æŒã•ã‚Œã¾ã™ */
  backdrop-filter: blur(2px) brightness(1.1) contrast(1.2) !important;
}
.underwater-overlay.active { opacity: 1; }

@keyframes waterRipple {
  0% { backdrop-filter: blur(1px); }
  50% { backdrop-filter: blur(2px); }
  100% { backdrop-filter: blur(1px); }
}
/* Fanmade Style */
.btn-fanmade span {
  background: #111;
  border-color: #555;
  box-shadow: 1px 1px 0 #333, 2px 2px 0 #333, 3px 3px 0 #333, 4px 4px 0 #333, 15px 15px 30px rgba(0,0,0,0.5);
}
.btn-fanmade span b { color: var(--fanmade-primary); text-shadow: 0 0 10px rgba(162, 155, 254, 0.6); }
.btn-fanmade:hover span { background: #222; border-color: var(--fanmade-primary); transform:translateZ(10px); }

#fanmadeSelectScreen.fanmade-theme {
  background: radial-gradient(circle at center, #1e1e2f 0%, #000 100%);
}
.fanmade-topbar {
  background: rgba(162, 155, 254, 0.1);
  border-bottom: 1px solid rgba(162, 155, 254, 0.3);
}
.fanmade-topbar .topbar__title { color: var(--fanmade-primary); font-family: monospace; font-size: 24px; }
.fanmade-section { background: rgba(0,0,0,0.7); border: 1px solid #444; }

/* ä»¥å‰ã® .fanmade-grid .level-item å®šç¾©ã‚’å‰Šé™¤ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ */

/* å‰µä½œãƒ¬ãƒ™ãƒ«ç”¨ã‚«ãƒ©ãƒ¼ãƒªãƒ³ã‚°ï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ .official ã‚’ç¶™æ‰¿ï¼‰ */
.level-item.official.fanmade {
  background-color: #151520 !important; /* ãƒ€ãƒ¼ã‚¯èƒŒæ™¯ */
  border-color: #a29bfe !important;      /* ç´«ãƒœãƒ¼ãƒ€ãƒ¼ */
  color: #fff !important;
  box-shadow: 0 4px 0 #6c5ce7;           /* ç«‹ä½“çš„ãªå½± */
  transition: transform 0.1s, background 0.1s;
}

.level-item.official.fanmade:hover {
  transform: translateY(-2px);
  background-color: #1e1e2e !important;
  box-shadow: 0 6px 0 #6c5ce7;
}

.level-item.official.fanmade:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #6c5ce7;
}

/* ãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ©ãƒ¼èª¿æ•´ */
.level-item.official.fanmade h4 {
  color: #a29bfe !important; /* No.X ã®è‰² */
  font-size: 24px;           /* ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¸ã¨åŒã˜ã‚µã‚¤ã‚ºæ„Ÿ */
  margin-bottom: 5px;
}

.level-item.official.fanmade .sub-title {
  color: #fff !important;
  font-size: 15px !important;
  font-weight: bold;
}

.level-item.official.fanmade .author-name {
  color: #888 !important;
  font-size: 11px;
  margin-top: 6px;
  font-style: italic;
}

/* Tiles Styles */
.tile[data-type="0"], .preview-tile.void { background: transparent; box-shadow: none; border: 1px dashed rgba(255,255,255,0.1); }
.tile[data-type="1"], .preview-tile.normal { background: #eee; }
.tile[data-type="2"], .preview-tile.start { background: #ff9f43; }
.tile[data-type="3"], .preview-tile.goal { background: #feca57; overflow:visible; }
.tile[data-type="3"].inactive, .preview-tile.goal.inactive { background: #b8860b; box-shadow: inset 0 0 10px rgba(0,0,0,0.5), 1px 1px 0 #888, 2px 2px 0 #888; }
.tile[data-type="3"].inactive::after { color: #ccc; opacity: 0.5; }
.tile[data-type="4"], .preview-tile.switch-arrow { background: #fff; border: 3px solid #ccc; }
.tile[data-type="5"], .preview-tile.fixed-arrow { background: #555; }
.tile[data-type="6"], .preview-tile.turn-var { background: #dcdcdc; border: 3px solid #aaa; }
.tile[data-type="7"], .preview-tile.turn-fix { background: #aaa; }
.tile[data-type="8"], .preview-tile.u-turn { background: #888; }
.tile[data-type="19"],            /* è¿½åŠ : ä¸€æ–¹é€šè¡ŒUã‚¿ãƒ¼ãƒ³ */
.preview-tile.one-way-u-turn {    /* è¿½åŠ : ãƒ‘ãƒ¬ãƒƒãƒˆç”¨ */
  background: #888;
}
.tile[data-type="9"], .preview-tile.glass { background: rgba(200, 240, 255, 0.8); border: 2px solid #81ecec; box-shadow: inset 0 0 10px rgba(255,255,255,0.5); opacity: 0.9; }
.tile[data-type="10"], .preview-tile.jump { background: #eee; }
.tile[data-type="10"]::before, .preview-tile.jump::before { content: ""; position: absolute; inset: 5px; background: #ff7675; clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%); box-shadow: inset 0 3px 0 rgba(255,255,255,0.4), inset 0 -3px 0 rgba(0,0,0,0.2), 0 3px 5px rgba(0,0,0,0.3); transform: translateZ(5px); z-index: 5; }
.tile[data-type="10"][data-val="1"]::before, .preview-tile.jump[data-val="1"]::before { background: #ff3f34; }
.tile[data-type="10"][data-val="2"]::before, .preview-tile.jump[data-val="2"]::before { background: #0fbcf9; }
.tile[data-type="10"][data-val="3"]::before, .preview-tile.jump[data-val="3"]::before { background: #05c46b; }
.tile[data-type="11"], .preview-tile.warp { background: #333; box-shadow: 0 0 10px currentColor; }
.tile[data-type="11"]::before, .preview-tile.warp::before { content: ""; position: absolute; inset: 8px; border: 4px solid currentColor; border-radius: 50%; }
.tile[data-type="11"][data-val="1"], .preview-tile.warp.color-1 { color: var(--c1); }
.tile[data-type="11"][data-val="2"] { color: var(--c2); }
.tile[data-type="11"][data-val="3"] { color: var(--c3); }
.tile[data-type="11"][data-val="4"] { color: var(--c4); }
.tile[data-type="11"][data-val="5"] { color: var(--c5); }
.tile[data-type="11"][data-val="6"] { color: var(--c6); }
.tile[data-type="11"][data-val="7"] { color: var(--c7); }
.tile[data-type="12"], .preview-tile.switch { background: #ddd; }
.tile[data-type="12"]::before, .preview-tile.switch::before { content: ""; position: absolute; inset: 10px; border-radius: 50%; background: currentColor; box-shadow: 0 4px 0 rgba(0,0,0,0.3); transform: translateZ(5px); transition: transform 0.1s; }
.tile[data-type="12"].active::before { transform: translateZ(2px); box-shadow: 0 1px 0 rgba(0,0,0,0.3); }
.tile[data-type="12"][data-val="1"], .preview-tile.switch.color-1 { color: var(--c1); }
.tile[data-type="12"][data-val="2"] { color: var(--c2); }
.tile[data-type="12"][data-val="3"] { color: var(--c3); }
.tile[data-type="12"][data-val="4"] { color: var(--c4); }
.tile[data-type="12"][data-val="5"] { color: var(--c5); }
.tile[data-type="12"][data-val="6"] { color: var(--c6); }
.tile[data-type="12"][data-val="7"] { color: var(--c7); }
.tile[data-type="13"], .tile[data-type="15"], .preview-tile.block, .preview-tile.block-off { background: currentColor; opacity: 1; transition: opacity 0.3s, transform 0.3s; }
.tile.off, .preview-tile.block-off { background: transparent !important; border: 4px solid currentColor !important; box-shadow: inset 0 0 10px rgba(0,0,0,0.3) !important; opacity: 0.6 !important; }
.tile[data-type="13"][data-val="1"], .tile[data-type="15"][data-val="1"], .preview-tile.block.color-1, .preview-tile.block-off.color-1 { color: var(--c1); }
.tile[data-type="13"][data-val="2"], .tile[data-type="15"][data-val="2"] { color: var(--c2); }
.tile[data-type="13"][data-val="3"], .tile[data-type="15"][data-val="3"] { color: var(--c3); }
.tile[data-type="13"][data-val="4"], .tile[data-type="15"][data-val="4"] { color: var(--c4); }
.tile[data-type="13"][data-val="5"], .tile[data-type="15"][data-val="5"] { color: var(--c5); }
.tile[data-type="13"][data-val="6"], .tile[data-type="15"][data-val="6"] { color: var(--c6); }
.tile[data-type="13"][data-val="7"], .tile[data-type="15"][data-val="7"] { color: var(--c7); }
.tile[data-type="14"], .preview-tile.crystal { background: #eee; }

/* Crystal 3D */
.crystal-3d { position: absolute; top: 50%; left: 50%; width: 0; height: 0; transform-style: preserve-3d; animation: floatCrystal 2.5s ease-in-out infinite; pointer-events: none; z-index: 100; }
.crystal-3d::before, .crystal-3d::after { content: ""; position: absolute; left: -10px; top: -10px; width: 20px; height: 20px; background: rgba(142, 68, 173, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); box-shadow: 0 0 10px rgba(165, 94, 234, 0.8); transform-origin: center; }
.crystal-3d::before { transform: rotateY(0deg) rotateZ(45deg); }
.crystal-3d::after { transform: rotateY(90deg) rotateZ(45deg); }
.crystal-3d .core { position: absolute; width: 14px; height: 14px; top: -7px; left: -7px; background: white; opacity: 0.8; transform: rotateX(45deg) rotateZ(45deg); box-shadow: 0 0 15px white; }
.preview-tile.crystal::before { content: ""; width:12px; height:12px; background:#8e44ad; transform:rotate(45deg); box-shadow:0 0 4px #8e44ad; }
@keyframes floatCrystal { 0%, 100% { transform: translateZ(30px) rotateY(0deg); } 50% { transform: translateZ(40px) rotateY(180deg); } }

/* Tile Icons */
.tile::after, .preview-tile::after { position: absolute; inset:0; display:grid; place-items:center; font-size: 24px; font-weight: bold; transform: rotate(var(--r, 0deg)); text-shadow: 0 1px 0 rgba(0,0,0,0.2); pointer-events: none; z-index: 20; }
.tile[data-type="2"]::after, .preview-tile.start::after { content: "â†‘"; color: #fff; }
.tile[data-type="3"]::after, .preview-tile.goal::after { content: "â†‘"; color: #fff; }
.tile[data-type="4"]::after, .preview-tile.switch-arrow::after { content: "â†‘"; color: #888; }
.tile[data-type="5"]::after, .preview-tile.fixed-arrow::after { content: "â†‘"; color: #fff; }
.tile[data-type="9"]::after, .preview-tile.glass::after { content: attr(data-val); color: #005588; font-size: 22px; text-shadow:none; transform: none; }
.tile[data-type="10"]::after, .preview-tile.jump::after { content: attr(data-val); color: #fff; font-size: 22px; text-shadow: 0 1px 2px rgba(0,0,0,0.5); transform: translateZ(6px); z-index: 25; }
.tile[data-type="6"]::after, .preview-tile.turn-var::after { content: ""; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M25 55 V25 H55' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M52 10 L80 25 L52 40 Z' fill='%23fff'/%3E%3Cpath d='M45 25 H75 V55' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M90 52 L75 80 L60 52 Z' fill='%23fff'/%3E%3Cpath d='M75 45 V75 H45' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M48 90 L20 75 L48 60 Z' fill='%23fff'/%3E%3Cpath d='M55 75 H25 V45' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M10 48 L25 20 L40 48 Z' fill='%23fff'/%3E%3C/svg%3E"); background-size: 85%; background-repeat: no-repeat; background-position: center; transform: scaleX(1); filter: drop-shadow(0 1px 3px rgba(0,0,0,0.6)); }
.tile[data-type="6"][style*="--r: 90deg"]::after, .tile[data-type="6"][style*="--r: 270deg"]::after { transform: scaleX(-1); }
.tile[data-type="7"]::after, .preview-tile.turn-fix::after { content: ""; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M25 55 V25 H55' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M52 10 L80 25 L52 40 Z' fill='%23fff'/%3E%3Cpath d='M45 25 H75 V55' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M90 52 L75 80 L60 52 Z' fill='%23fff'/%3E%3Cpath d='M75 45 V75 H45' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M48 90 L20 75 L48 60 Z' fill='%23fff'/%3E%3Cpath d='M55 75 H25 V45' fill='none' stroke='%23fff' stroke-width='14' stroke-linejoin='round' stroke-linecap='round'/%3E%3Cpath d='M10 48 L25 20 L40 48 Z' fill='%23fff'/%3E%3C/svg%3E"); background-size: 85%; background-repeat: no-repeat; background-position: center; transform: scaleX(1); filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4)); }
.tile[data-type="7"][style*="--r: 90deg"]::after, .tile[data-type="7"][style*="--r: 270deg"]::after { transform: scaleX(-1); }
.tile[data-type="8"]::after, .preview-tile.u-turn::after { content: ""; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='12' fill='none' stroke='%23fff' stroke-width='6'/%3E%3Cpath d='M50 38 L50 15 M50 62 L50 85 M38 50 L15 50 M62 50 L85 50' stroke='%23fff' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M50 15 L40 25 M50 15 L60 25 M50 85 L40 75 M50 85 L60 75 M15 50 L25 40 M15 50 L25 60 M85 50 L75 40 M85 50 L75 60' stroke='%23fff' stroke-width='6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"); background-size: 80%; background-repeat: no-repeat; background-position: center; transform: rotate(var(--r, 0deg)); }
.tile[data-type="16"], .preview-tile.toggle-switch { background: #ddd; transition: all 0.3s; }
.tile[data-type="16"]::after, .preview-tile.toggle-switch::after { content: ""; background-size: 70%; background-repeat: no-repeat; background-position: center; transition: all 0.3s; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 20 L85 80 H15 Z' fill='%23ff4757' stroke='%23fff' stroke-width='6' stroke-linejoin='round'/%3E%3C/svg%3E"); }
.tile[data-type="16"].toggle-blue::after { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 20 L85 80 H15 Z' fill='%231e90ff' stroke='%23fff' stroke-width='6' stroke-linejoin='round'/%3E%3C/svg%3E"); }
.tile[data-type="16"].active { transform: scale(0.9); }
.tile[data-type="18"], .preview-tile.toggle-arrow-fix { transition: background 0.3s; background: #444; border: 2px solid #333; }
.tile[data-type="18"]::after, .preview-tile.toggle-arrow-fix::after { content: ""; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C!-- Up Arrow (Red) --%3E%3Cpath d='M50 10 L80 40 H60 V55 H40 V40 H20 Z' fill='%23ff4757' stroke='%23fff' stroke-width='4' stroke-linejoin='round'/%3E%3C!-- Down Arrow (Gray) --%3E%3Cpath d='M50 90 L20 60 H40 V45 H60 V60 H80 Z' fill='%23999' stroke='%23fff' stroke-width='4' stroke-linejoin='round'/%3E%3C/svg%3E"); background-size: 80%; background-repeat: no-repeat; background-position: center; transform: rotate(var(--r, 0deg)); width: 100%; height: 100%; }
.tile[data-type="18"].toggle-blue::after { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C!-- Up Arrow (Gray) --%3E%3Cpath d='M50 10 L80 40 H60 V55 H40 V40 H20 Z' fill='%23999' stroke='%23fff' stroke-width='4' stroke-linejoin='round'/%3E%3C!-- Down Arrow (Blue) --%3E%3Cpath d='M50 90 L20 60 H40 V45 H60 V60 H80 Z' fill='%231e90ff' stroke='%23fff' stroke-width='4' stroke-linejoin='round'/%3E%3C/svg%3E"); }
/* 2. ä¸€æ–¹é€šè¡ŒUã‚¿ãƒ¼ãƒ³ã®ã‚¢ã‚¤ã‚³ãƒ³å®šç¾© */
/* ç™½ã„ç·šã§Tå­—è·¯ï¼ˆè¡Œãæ­¢ã¾ã‚Šï¼‰ã‚’æç”» */
.tile[data-type="19"]::after, .preview-tile.one-way-u-turn::after {
  content: "";
  /* 180åº¦å›è»¢: ä¸‹ã«å£ã€ä¸Šã‹ã‚‰ä¸‹ã«å‘ã‹ã†çŸ¢å° */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C!-- è¡Œãæ­¢ã¾ã‚Šã®å£ (ä¸‹) --%3E%3Cline x1='20' y1='75' x2='80' y2='75' stroke='%23fff' stroke-width='10' stroke-linecap='round'/%3E%3C!-- é€²è¡Œæ–¹å‘ã®çŸ¢å° (ä¸Šã‹ã‚‰ä¸‹ã¸) --%3E%3Cline x1='50' y1='20' x2='50' y2='60' stroke='%23fff' stroke-width='8' stroke-linecap='round'/%3E%3Cpath d='M30 45 L50 65 L70 45' fill='none' stroke='%23fff' stroke-width='8' stroke-linejoin='round' stroke-linecap='round'/%3E%3C/svg%3E");
  background-size: 80%;
  background-repeat: no-repeat;
  background-position: center;
  transform: rotate(var(--r, 0deg));
  width: 100%;
  height: 100%;
}


/* æœ¨ç®± (Wooden Box) - å¤‰æ›´ãªã— */
.tile[data-type="20"], .preview-tile.wooden-box {
  background: #8d6e63;
  border: 4px solid #5d4037;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}
.tile[data-type="20"]::before, .preview-tile.wooden-box::before {
  content: ""; position: absolute; inset: 0;
  background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,0.1) 10px, rgba(0,0,0,0.1) 12px);
  opacity: 0.5;
}
.tile[data-type="20"]::after, .preview-tile.wooden-box::after {
  content: attr(data-val);
  color: #fce4ec; font-size: 24px; font-weight: 900;
  text-shadow: 1px 1px 0 #3e2723; z-index: 2; transform: none !important;
}

/* â˜…å›è»¢çŸ¢å° (Rotating Arrow) - ãƒ‡ã‚¶ã‚¤ãƒ³å¤‰æ›´â˜… */
/* å…±é€š: å¯å¤‰çŸ¢å°ã¨åŒã˜è¦‹ãŸç›®(â†‘)ã§ã€æ ç·šã¨çŸ¢å°ã®è‰²ã‚’å¤‰ãˆã‚‹ */
.tile[data-type="21"], .tile[data-type="22"],
.tile[data-type="23"], .tile[data-type="24"],
.preview-tile.rot-arrow-cw, .preview-tile.rot-arrow-ccw {
  background: #fff;
  border: 3px solid #333;
}

.tile[data-type="21"]::after, .tile[data-type="22"]::after,
.tile[data-type="23"]::after, .tile[data-type="24"]::after,
.preview-tile.rot-arrow-cw::after, .preview-tile.rot-arrow-ccw::after {
  content: "â†‘";  /* å¯å¤‰çŸ¢å°ã¨åŒã˜ */
  font-size: 24px;
  font-weight: bold;
  transform: rotate(var(--r, 0deg));
  text-shadow: 0 1px 0 rgba(0,0,0,0.2);
  display: grid; place-items: center; position: absolute; inset: 0;
  background-image: none; /* ç”»åƒã¯å»ƒæ­¢ */
}

/* æ™‚è¨ˆå›ã‚Š (CW) - ç·‘ç³»ã§çµ±ä¸€ */
.tile[data-type="21"], .preview-tile.rot-arrow-cw {
  border-color: #27ae60;
}
.tile[data-type="21"]::after, .preview-tile.rot-arrow-cw::after {
  color: #27ae60;
}

/* åæ™‚è¨ˆå›ã‚Š (CCW) - ç´«ç³»ã§çµ±ä¸€ */
.tile[data-type="22"], .preview-tile.rot-arrow-ccw {
  border-color: #9b59b6;
}
.tile[data-type="22"]::after, .preview-tile.rot-arrow-ccw::after {
  color: #9b59b6;
}

/* å›ºå®šç‰ˆ (Fix) - èƒŒæ™¯ã‚’ã‚°ãƒ¬ãƒ¼ã«ã—ã¦åŒºåˆ¥ã€è‰²ã¯å°‘ã—æš—ã */
.tile[data-type="23"], .tile[data-type="24"] {
  background: #dfe6e9; /* è–„ã„ã‚°ãƒ¬ãƒ¼ */
}
.tile[data-type="23"]::after { color: #1e8449; } /* æš—ã„ç·‘ */
.tile[data-type="24"]::after { color: #8e44ad; } /* æš—ã„ç´« */


/* ç‚ã‚·ã‚¹ãƒ†ãƒ  - å¤‰æ›´ãªã— */
.tile[data-type="25"], .preview-tile.ignite {
  background: #c0392b; box-shadow: 0 0 15px #e74c3c; animation: pulseFire 1.5s infinite;
}
.tile[data-type="25"]::after, .preview-tile.ignite::after { content: "ğŸ”¥"; font-size: 28px; transform: none; }

.tile[data-type="26"], .preview-tile.extinguish {
  background: #2980b9; box-shadow: 0 0 15px #3498db;
}
.tile[data-type="26"]::after, .preview-tile.extinguish::after { content: "ğŸ’§"; font-size: 28px; transform: none; }

.tile[data-type="27"], .preview-tile.fire-gate {
  background: #2c3e50; border: 4px double #e74c3c;
}
.tile[data-type="27"]::after, .preview-tile.fire-gate::after {
  content: "";
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M20 20 H80 V80 H20 Z' fill='none' stroke='%23e74c3c' stroke-width='4'/%3E%3Cpath d='M50 20 V80 M20 50 H80' stroke='%23e74c3c' stroke-width='4'/%3E%3C/svg%3E");
  background-size: cover; opacity: 0.6;
}
@keyframes pulseFire { 0%{box-shadow:0 0 10px #e74c3c;} 50%{box-shadow:0 0 25px #f1c40f;} 100%{box-shadow:0 0 10px #e74c3c;} }


/* â˜…ãƒœãƒ¼ãƒ«ã®ç‚çŠ¶æ…‹ (ä¿®æ­£ç‰ˆ)â˜… */
/* style.css ã® .ball.fire-mode ã‚’å®Œå…¨ã«æ›¸ãæ›ãˆ */

.ball.fire-mode {
  /* 1. ç«‹ä½“æ„Ÿã®æºã§ã‚ã‚‹ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨åŒã˜ã€Œå·¦ä¸Š(35% 35%)ã€ã‹ã‚‰ã®å…‰æ²¢ã‚’ç¶­æŒã—ã¤ã¤ã€è‰²ã‚’ç‚ã¸å¤‰æ›´ */
  background: radial-gradient(
    circle at 35% 35%,
    #ffffff 5%,     /* ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆç™½ï¼‰ */
    #ffff00 15%,    /* ä¸­å¿ƒï¼ˆé»„è‰²ï¼‰ */
    #ff8c00 40%,    /* ä¸­é–“ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ï¼‰ */
    #c0392b 70%,    /* é™°å½±ï¼ˆèµ¤ï¼‰ */
    #581616 100%    /* è¼ªéƒ­ï¼ˆç„¦ã’èŒ¶ï¼‰ */
  );

  /* 2. å½±ã¨ç™ºå…‰ã®ä¸¡ç«‹ */
  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å½±(-5px 5px 10px rgba(0,0,0,0.4)) ã‚’æ®‹ã—ã¤ã¤ã€
     ç‚ã®å…‰(0 0 20px ...) ã‚’è¿½åŠ ã—ã¾ã™ */
  box-shadow: 
    -5px 5px 10px rgba(0,0,0,0.5),   /* åœ°é¢ã«è½ã¡ã‚‹å½±ï¼ˆã“ã‚Œã§æµ®ã„ã¦è¦‹ãˆãªããªã‚‹ï¼‰ */
    0 0 15px rgba(255, 69, 0, 0.6),  /* ç‚ã®ã‚°ãƒ­ãƒ¼åŠ¹æœ */
    inset 0 0 10px rgba(255, 215, 0, 0.5); /* å†…å´ã®ç™ºå…‰ */

  /* ä½™è¨ˆãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£(transform-styleãªã©)ã¯è¨˜è¿°ã—ãªã„ */
}
.fire-particle {
  position: absolute;
  width: 12px;
  height: 12px;
  /* ç‚ã£ã½ã„è‰²å‘³ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
  background: radial-gradient(circle, #ffff00 0%, #ff4500 50%, transparent 80%);
  border-radius: 50%;
  pointer-events: none; 
  z-index: 150; 
  box-shadow: 0 0 10px #ff4500;
  will-change: transform, opacity;
}

.tile[data-type="3"]::before { content: ""; position: absolute; inset:0; background: radial-gradient(circle, rgba(255,255,255,0.8) 10%, transparent 70%); opacity: 0; animation: floatSparkle 2s infinite linear; pointer-events: none; z-index: 10; }
.tile.rainbow-effect::before { content: ""; position: absolute; inset: 0; border-radius: 2px; z-index: 15; animation: rainbowFlash 1.2s ease-out forwards; }
@keyframes rainbowFlash { 0% { background-color: rgba(255, 94, 87, 0.8); } 20% { background-color: rgba(255, 221, 89, 0.8); } 40% { background-color: rgba(5, 196, 107, 0.8); } 60% { background-color: rgba(15, 188, 249, 0.8); } 80% { background-color: rgba(142, 68, 173, 0.8); opacity: 1; } 100% { background-color: rgba(142, 68, 173, 0); opacity: 0; } }
.tile.flash-white::before { content: ""; position: absolute; inset:0; background: #fff; z-index: 100; animation: flashAnim 0.4s ease-out forwards; }
@keyframes flashAnim { from{opacity:1;} to{opacity:0;} }

.ball { position: absolute; width: 30px; height: 30px; background: radial-gradient(circle at 35% 35%, #fff, #4a90e2, #2c3e50); border-radius: 50%; top: 0; left: 0; transform-origin: center center; box-shadow: -5px 5px 10px rgba(0,0,0,0.4); z-index: 100; pointer-events: none; }
.particle { position: absolute; width: 6px; height: 6px; background: #fff; border-radius: 50%; pointer-events: none; z-index: 101; }
.topbar{ position:absolute; top:0; left:0; right:0; height: 60px; display:flex; align-items:center; justify-content:space-between; padding:0 20px; background:rgba(0,0,0,0.6); backdrop-filter:blur(10px); z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
.topbar__title{ font-weight:bold; letter-spacing:0.1em; color: var(--accent); font-size: 18px; }
.loading-overlay { position:fixed; inset:0; background:#111; z-index:9999; display:flex; flex-direction:column; justify-content:center; align-items:center; opacity:0; pointer-events:none; transition:opacity 0.3s; }
.loading-overlay.active { opacity:1; pointer-events:auto; }
.spinner { width:50px; height:50px; border:5px solid var(--accent); border-top-color:transparent; border-radius:50%; animation:spin 0.8s linear infinite; }
@keyframes logoPop{ to { opacity:1; transform: translateY(0) scale(1); } }
@keyframes logoFloat{ 0%,100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-6px) scale(1.002); } }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes slideIn { from { opacity:0; transform: translateX(20px); } to { opacity:1; transform: translateX(0); } }
@keyframes floatSparkle { 0%{ transform:translateZ(0) scale(0.5); opacity:0; } 50%{ opacity:0.8; } 100%{ transform:translateZ(60px) scale(1.2); opacity:0; } }

/* Play UI */

.play-intro {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  text-align: center;
  pointer-events: none;
  z-index: 600;
}

.play-intro h1 {
  font-size: 40px;
  color: var(--accent);
  margin: 0;
  text-shadow: 0 4px 10px rgba(0,0,0,0.5);
  opacity: 1; /* JSã§åˆ¶å¾¡ã™ã‚‹ãŸã‚åˆæœŸã¯1ã«(GSAPã§setã™ã‚‹) */
}

.play-intro h1.ex-mode {
  color: var(--ex-title);
}

.play-intro p {
  margin: 5px 0;
  font-size: 18px;
  color: #fff;
  opacity: 1;
}

.play-timer-area { position: absolute; top: 70px; right: 20px; background: rgba(0,0,0,0.4); padding: 8px 16px; border-radius: 8px; font-family: monospace; font-size: 16px; color: #fff; opacity: 0; }
.play-stage-container { position:absolute; inset:0; display:flex; justify-content:center; align-items:center; perspective:1000px; }
.play-controls { position: absolute; top: 70px; left: 20px; display: flex; gap: 10px; pointer-events: auto; z-index: 800; }

/* Clear Overlay */
.clear-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.6); z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.5s; }
.clear-overlay.active { opacity: 1; pointer-events: auto; }
.clear-overlay.hidden { display: none; }
.clear-text-container { display: flex; gap: 15px; perspective: 500px; margin-bottom: 40px; }
.clear-char { width: 60px; height: 100px; background: var(--accent); color: #fff; font-size: 50px; display: flex; justify-content: center; align-items: center; font-weight: 900; border-radius: 8px; box-shadow: 0 10px 0 #dda335, 0 20px 20px rgba(0,0,0,0.4); transform: rotateX(20deg); opacity: 0; }
.clear-actions { display: flex; gap: 20px; opacity: 0; transform: translateY(20px); transition: 0.5s ease 1s; }
.clear-overlay.active .clear-actions { opacity: 1; transform: translateY(0); }

/* Tutorial Guide */
.tutorial-guide { position: absolute; background: #fff; color: #333; padding: 8px 12px; border-radius: 8px; font-size: 14px; font-weight: bold; pointer-events: none; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 1000; white-space: nowrap; left: 50%; top: 50%; animation: floatGuide 1.5s ease-in-out infinite; }
.tutorial-guide::after { content: ""; position: absolute; left: 50%; bottom: -6px; transform: translateX(-50%); border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 6px solid #fff; }
@keyframes floatGuide { 0%, 100% { transform: translate3d(-50%, -100%, 50px) rotateZ(-45deg) rotateX(-45deg) scale(1); } 50% { transform: translate3d(-50%, -100%, 60px) rotateZ(-45deg) rotateX(-45deg) scale(1); } }

/* Data Reset */
.data-reset-area { margin-top: 20px; text-align: center; }
.btn-text-danger { background: none; border: none; color: #888; font-size: 12px; text-decoration: underline; cursor: pointer; }
.btn-text-danger:hover { color: var(--danger); }

/* UI Animation */
.ui-enter-active .topbar { animation: slideDownFade 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
.ui-enter-active .level-list-section, .ui-enter-active .level-details-section, .ui-enter-active .editor-palette, .ui-enter-active .editor-stage, .ui-enter-active .editor-bottom-actions { opacity: 0; animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
.ui-enter-active .level-list-section { animation-delay: 0.1s; }
.ui-enter-active .level-details-section { animation-delay: 0.2s; }
.ui-enter-active .editor-stage { animation-delay: 0.1s; }
.ui-enter-active .editor-palette { animation-delay: 0.2s; }
.ui-enter-active .editor-bottom-actions { animation-delay: 0.3s; }
.ui-exit-active { pointer-events: none; }
.ui-exit-active .topbar { animation: slideUpFadeOut 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
.ui-exit-active .level-list-section, .ui-exit-active .level-details-section, .ui-exit-active .editor-palette, .ui-exit-active .editor-stage, .ui-exit-active .editor-bottom-actions, .ui-exit-active .editor-menu-container { animation: slideDownFadeOut 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
@keyframes slideDownFade { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUpFade { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUpFadeOut { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-20px); } }
@keyframes slideDownFadeOut { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(30px); } }

.ftue-guide-bubble { position: absolute; top: -45px; left: 50%; transform: translateX(-50%); background: var(--accent); color: #4e3600; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; white-space: nowrap; box-shadow: 0 4px 10px rgba(0,0,0,0.3); animation: bounceGuide 1.5s infinite; z-index: 100; pointer-events: none; }
.ftue-guide-bubble::after { content: ""; position: absolute; bottom: -6px; left: 50%; transform: translateX(-50%); border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 6px solid var(--accent); }
@keyframes bounceGuide { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-10px); } }

.level-item.official.flip-reveal { animation: flipCard 0.8s cubic-bezier(0.4, 0.0, 0.2, 1); transform-style: preserve-3d; }
@keyframes flipCard { 0% { transform: rotateX(-180deg); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: rotateX(0deg); opacity: 1; } }

.all-clear-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10000; opacity: 1; pointer-events: none; transition: opacity 1s ease; }
.all-clear-overlay.hidden { opacity: 0; pointer-events: none; }
.congrats-text { font-size: 48px; font-weight: bold; color: var(--accent); text-align: center; line-height: 1.4; text-shadow: 0 0 20px rgba(242, 184, 76, 0.6); opacity: 0; transform: scale(0.8); animation: popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
.ex-unlock-text { position: absolute; bottom: 15%; font-size: 28px; font-weight: bold; color: #ff4757; text-align: center; line-height: 1.5; text-shadow: 0 0 10px rgba(255, 71, 87, 0.5); opacity: 0; transform: translateY(20px); }
.ex-unlock-text.visible { animation: slideUpFade 1s ease forwards; }
@keyframes popIn { to { opacity: 1; transform: scale(1); } }

@media (max-width:768px){ 
  .editor-menu-container { flex-direction: column; padding: 10px; top: 60px; gap: 10px; } 
  .level-details-section { order: -1; } 
  .editor-topbar { padding-right: 10px; } 
  .title-action-buttons { top: 20px; right: 20px; gap: 10px; }
  .title-top-btn { width: 60px; height: 60px; font-size: 30px; }
}
/* ã‚¯ãƒªã‚¢ã‚¿ã‚¤ãƒ ãƒãƒƒã‚¸ã®ä¿®æ­£ */
.clear-time-info {
  margin-top: 12px;       /* ä½œè€…åã¨ã®é–“éš” */
  font-size: 11px;
  color: #2ed573;
  background: rgba(0, 0, 0, 0.08);
  padding: 4px 12px;      /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ã—ã¦ãƒãƒ©ãƒ³ã‚¹ã‚’è‰¯ã */
  border-radius: 99px;    /* ã‚«ãƒ—ã‚»ãƒ«å‹ */
  font-family: monospace;
  font-weight: bold;
  opacity: 0;             /* æœ€åˆã¯éš ã™ */
  transform: translateZ(10px); /* å›è»¢æ™‚ã«å°‘ã—æµ®ãä¸ŠãŒã£ã¦è¦‹ãˆã‚‹ã‚ˆã†ã« */
  white-space: nowrap;
}

/* è‡ªç„¶ãªå›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šç«‹ä½“æ„Ÿã‚’å‡ºã—ã€å°‘ã—æ‰‹å‰ã«æµ®ãä¸ŠãŒã‚‰ã›ã‚‹ */
.level-item.official.flip-reveal {
  animation: flipToClearNatural 0.7s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.level-item.official.flip-reveal .clear-time-info {
  opacity: 1;
  transition: opacity 0.3s 0.35s; /* å›è»¢ãŒåŠåˆ†éããŸã‚ãŸã‚Šã§è¡¨ç¤º */
}

@keyframes flipToClearNatural {
  0% {
    transform: perspective(1000px) rotateY(0deg) scale(1);
  }
  50% {
    transform: perspective(1000px) rotateY(90deg) scale(1.1); /* çœŸæ¨ªã‚’å‘ã„ãŸæ™‚ã«å°‘ã—å¤§ããï¼ˆæ‰‹å‰ã«ï¼‰ */
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  }
  100% {
    transform: perspective(1000px) rotateY(0deg) scale(1); /* 0åº¦ã«æˆ»ã‚‹ãŒã€ã“ã®æ™‚JSã§è‰²ãŒç·‘ã«å¤‰ã‚ã£ã¦ã„ã‚‹ */
  }
}

/* ã‚¯ãƒªã‚¢æ¸ˆã¿çŠ¶æ…‹ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆå›è»¢çµ‚äº†æ™‚ã®è‰²ï¼‰ */
.level-item.official.cleared {
  border-color: #2ed573 !important;
  background: #f0fff4 !important;
  box-shadow: 0 4px 12px rgba(46, 213, 115, 0.2);
}
/* ãƒ¢ãƒã‚¤ãƒ«ãƒ»ç¸¦ç”»é¢æ™‚ã®ãƒœã‚¿ãƒ³é…ç½®ï¼†ç›¤é¢é…ç½® å®Œå…¨ä¿®æ­£ç‰ˆ */
@media (max-width: 1024px) and (orientation: portrait), (max-width: 740px), (max-height: 520px) {
  
  /* ç›¤é¢ã‚³ãƒ³ãƒ†ãƒŠ: ä¸Šä¸‹å·¦å³ä¸­å¤®å¯„ã›ã‚’å¼·åˆ¶ */
  .play-stage-container {
    padding-bottom: 140px !important; /* ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢(ç´„120px) + ä½™è£• */
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important; /* å‚ç›´æ–¹å‘ä¸­å¤® */
    align-items: center !important;     /* æ°´å¹³æ–¹å‘ä¸­å¤® */
    width: 100% !important;
    height: 100% !important;
  }

  /* ç›¤é¢ã‚°ãƒªãƒƒãƒ‰æœ¬ä½“: ãƒãƒ¼ã‚¸ãƒ³autoã§å¿µæŠ¼ã—ã‚»ãƒ³ã‚¿ãƒªãƒ³ã‚° */
  .editor-grid {
    margin: auto !important; /* Flexboxå†…ã§ã®å¼·åˆ¶ä¸­å¤®é…ç½® */
    flex: 0 0 auto !important; /* ã‚µã‚¤ã‚ºå›ºå®š */
    /* å›è»¢ã®ä¸­å¿ƒã‚ºãƒ¬ã‚’é˜²ã */
    transform-origin: center center !important;
  }

  /* æ“ä½œãƒœã‚¿ãƒ³ç¾¤: ç”»é¢ä¸‹éƒ¨ã«å›ºå®š */
  .play-controls {
    position: absolute !important;
    top: auto !important;
    bottom: calc(30px + var(--sab)) !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    display: flex !important;
    flex-direction: row !important;
    gap: 12px !important;
    width: auto !important; /* 92%ã‹ã‚‰autoã¸å¤‰æ›´ã—ã€ä¸­èº«ã«åˆã‚ã›ã‚‹ */
    pointer-events: auto !important; /* ç¢ºå®Ÿã«ã‚¯ãƒªãƒƒã‚¯ã‚’é€šã™ */
    z-index: 9000 !important;
  }
  
  .play-controls .btn {
    pointer-events: auto;
    flex: 1 1 auto !important;
    width: auto !important;
    min-width: 0 !important;
    padding: 14px 0 !important;
    margin: 0 !important;
    font-size: 12px !important;
    white-space: nowrap !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
  }
  
  /* æ€è€ƒæ™‚é–“: é‚ªé­”ã«ãªã‚‰ãªã„ã‚ˆã†å³ä¸Šã¸ */
  .play-timer-area {
    top: calc(15px + var(--sat)) !important;
    right: calc(15px + var(--sar)) !important;
    left: auto !important;
    transform: none !important;
    font-size: 12px !important;
    padding: 4px 8px !important;
    background: rgba(0,0,0,0.6) !important;
    pointer-events: none;
  }
  
  /* ã‚¿ã‚¤ãƒˆãƒ«æ–‡å­—ã‚µã‚¤ã‚ºèª¿æ•´ */
  .play-intro h1 { font-size: 24px !important; }
  .play-intro p { font-size: 12px !important; }
}


/* ------------------------------
   Mobile & Small-window tweaks
   ------------------------------ */

/* Title screen: reduce negative top shift on short windows */
@media (max-height: 640px) {
  .logoStage{ margin-top: clamp(-20px, -2vh, 0px); }
  .menu{ margin-top: -8px; gap: 16px; }
  .hint{ margin-top: 24px; }
}

/* Mobile editor: make it actually usable (palette becomes bottom sheet + 2D view) */
@media (max-width: 720px) {
  /* Keep topbar usable (avoid huge right padding for palette) */
  .editor-topbar { padding-right: 16px; }

  /* Palette -> bottom sheet */
  .editor-palette{
    left: 12px;
    right: 12px;
    top: auto;
    bottom: calc(88px + env(safe-area-inset-bottom, 0px));
    width: auto;
    max-height: 52svh;
    border-radius: 16px;
    box-shadow: 0 14px 36px rgba(0,0,0,0.35);
  }
  .editor-palette.minimized { height: 56px; }
  .palette-header{ padding: 14px 14px; font-size: 16px; }
  .palette-content{ padding: 12px; gap: 10px; }
  .palette-item{ padding: 14px 12px; font-size: 16px; border-radius: 12px; }
  .preview-tile{ width: 38px; height: 38px; }

  /* Bottom buttons: respect safe area */
  .editor-bottom-actions{
    left: 12px;
    right: 12px;
    bottom: calc(14px + env(safe-area-inset-bottom, 0px));
    gap: 12px;
  }
  .big-btn{ padding: 14px 28px; font-size: 16px; }

  /* Mobile editor view: remove 3D rotation (play stays 3D) */
  #editorMainScreen .editor-grid{
    transform: scale(var(--gridScale, 1)) !important;
    background: rgba(0,0,0,0.14);
  }
  #editorMainScreen .tile{ width: 44px; height: 44px; }

  /* Give room so palette doesn't completely cover the stage */
  #editorMainScreen .editor-stage{ padding-bottom: 210px; }
}

/* --- style.css ã®ä¸€ç•ªæœ€å¾Œã«è¿½åŠ ã—ã¦ãã ã•ã„ --- */

/* å¼·åˆ¶é©ç”¨ãƒ‘ãƒƒãƒ: IDã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½¿ã£ã¦ç¢ºå®Ÿã«èƒŒæ™¯ã‚’é©ç”¨ */
#mainBg.underwater {
  background: radial-gradient(circle at 50% 20%, #4facfe 0%, #00f2fe 10%, #00416a 60%, #001021 100%) !important;
}

#mainBg.space, #mainBg.ex-mode {
  background: linear-gradient(180deg, var(--ex-bg1) 0%, var(--ex-bg2) 50%, var(--ex-bg3) 100%) !important;
}

#mainBg.burning {
  background: linear-gradient(180deg, var(--bg-burn-1) 0%, var(--bg-burn-2) 50%, var(--bg-burn-3) 100%) !important;
}

#mainBg.cold {
  background: linear-gradient(180deg, var(--bg-cold-1) 0%, var(--bg-cold-2) 40%, var(--bg-cold-3) 100%) !important;
}

#mainBg.dark-oak {
  background-color: #e0ac69 !important;
  background-image: 
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.12'/%3E%3C/svg%3E"),
    linear-gradient(to bottom, transparent 58px, rgba(90, 45, 10, 0.4) 59px, rgba(90, 45, 10, 0.4) 60px) !important;
  background-size: 200px 200px, 100% 60px !important;
}

/* å‰µä½œãƒ¬ãƒ™ãƒ«ï¼šã‚¯ãƒªã‚¢æ¸ˆã¿çŠ¶æ…‹ã®ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆç·‘è‰²ã«ç™ºå…‰ï¼‰ */
.level-item.official.fanmade.cleared {
  background-color: #0c1a13 !important; /* æš—ã„ç·‘è‰²ã®èƒŒæ™¯ */
  border-color: #2ed573 !important;      /* æ˜ã‚‹ã„ç·‘ã®æ ç·š */
  box-shadow: 0 0 15px rgba(46, 213, 115, 0.6) !important; /* ç™ºå…‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
  transform: translateY(-2px);
}

/* å‰µä½œãƒ¬ãƒ™ãƒ«ï¼šã‚¯ãƒªã‚¢ã‚¿ã‚¤ãƒ ãƒãƒƒã‚¸ã®è‰²èª¿æ•´ */
.level-item.official.fanmade.cleared .clear-time-info {
  background: rgba(46, 213, 115, 0.2);
  color: #2ed573;
  border: 1px solid #2ed573;
}
/* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã®å®£ä¼ãƒªãƒ³ã‚¯ã‚¨ãƒªã‚¢ */
.social-area {
  position: absolute;
  bottom: calc(30px + var(--sab)); /* å°‘ã—åº•ä¸Šã’ */
  left: calc(30px + var(--sal));   /* å°‘ã—å³ã¸ */
  display: flex;
  flex-direction: column;
  gap: 15px;              /* é–“éš”ã‚‚å°‘ã—åºƒã’ã‚‹ */
  z-index: 200;
  pointer-events: auto;
}

/* å€‹åˆ¥ã®ãƒªãƒ³ã‚¯è¡Œãƒ‡ã‚¶ã‚¤ãƒ³ */
.social-link {
  display: flex;
  align-items: center;
  gap: 15px;              /* ã‚¢ã‚¤ã‚³ãƒ³ã¨æ–‡å­—ã®é–“éš”ã‚’åºƒã’ã‚‹ */
  text-decoration: none;
  color: rgba(255, 255, 255, 0.8); /* å°‘ã—æ˜ã‚‹ã */
  transition: all 0.2s ease;
  background: rgba(0, 0, 0, 0.4); /* èƒŒæ™¯ã‚’å°‘ã—æ¿ƒã */
  padding: 10px 20px;     /* ä½™ç™½ã‚’å¤§ãã */
  border-radius: 40px;    /* ä¸¸ã¿ã‚’å¤§ãã */
  backdrop-filter: blur(4px);
}

.social-link:hover {
  color: #fff;
  background: rgba(0, 0, 0, 0.6);
  transform: translateX(5px) scale(1.05); /* ãƒ›ãƒãƒ¼æ™‚ã«å°‘ã—æ‹¡å¤§ */
}

/* ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ (32px -> 48px) */
.social-link img {
  width: 48px;
  height: 48px;
  object-fit: contain;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

/* URLãƒ†ã‚­ã‚¹ãƒˆ (14px -> 18px) */
.social-link span {
  font-family: sans-serif;
  font-size: 18px;        /* æ–‡å­—ã‚µã‚¤ã‚ºã‚¢ãƒƒãƒ— */
  font-weight: bold;
  letter-spacing: 0.05em;
}

/* ã‚¹ãƒãƒ›å¯¾å¿œ: ç”»é¢ãŒç‹­ã„ã¨ãã¯æ§ãˆã‚ã«ã™ã‚‹ */
@media (max-width: 600px) {
  .social-area {
    bottom: calc(15px + var(--sab));
    left: calc(15px + var(--sal));
    gap: 10px;
  }
  .social-link {
    padding: 6px 12px;
    gap: 8px;
  }
  .social-link img {
    width: 32px;
    height: 32px;
  }
  .social-link span {
    font-size: 12px;
  }
}

/* â–¼â–¼â–¼ ãƒªã‚¹ãƒˆå†…ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼ˆä¿®æ­£ç‰ˆï¼‰ â–¼â–¼â–¼ */
.list-loading-container {
  grid-column: 1 / -1; /* ã‚°ãƒªãƒƒãƒ‰ã®å…¨åˆ—ã‚’ä½¿ã† */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 60px 0;
  color: #ccc;
  width: 100%;
  min-height: 300px; /* é«˜ã•ã‚’ç¢ºä¿ã—ã¦çœŸã‚“ä¸­ã«è¡¨ç¤º */
}

.list-loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(255, 255, 255, 0.1);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

/* ãƒ•ã‚¡ãƒ³ãƒ¡ã‚¤ãƒ‰ç”»é¢ç”¨ã‚¹ãƒ”ãƒŠãƒ¼è‰² */
.fanmade-theme .list-loading-spinner {
  border-top-color: #a29bfe; /* var(--fanmade-primary) */
}

.list-loading-text {
  font-family: monospace;
  font-size: 28px;
  font-weight: bold;
  color: #fff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.list-loading-sub {
  font-size: 14px;
  color: #888;
  margin-top: 8px;
}

.ball-trail {
  position: absolute;
  height: 12px;       /* â˜…ä¿®æ­£: 6px -> 12px ã«å¤ªãã—ã¾ã—ãŸ */
  background: #00d2d3; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰² */
  border-radius: 6px;  /* ä¸¸ã¿ã‚’èª¿æ•´ (é«˜ã•ã®åŠåˆ†) */
  pointer-events: none;
  z-index: 90;
  box-shadow: 0 0 10px rgba(0, 210, 211, 0.8);
  opacity: 0.8;
  
  transform-origin: left center;
  will-change: transform, opacity, background-color;
}

.level-item.official.dlc {
  /* çœŸã£é»’(#000)ã‚’ã‚„ã‚ã€æ·±ã„é’ç·‘ã€œã‚·ã‚¢ãƒ³ã¸ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ */
  background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%) !important;
  
  border-color: #00d2d3 !important; /* æ ç·šã¯ãƒã‚ªãƒ³ã‚·ã‚¢ãƒ³ */
  box-shadow: 0 4px 15px rgba(0, 210, 211, 0.3) !important;
  color: #fff !important;
  
  /* ç«‹ä½“æ„Ÿã‚’å‡ºã™ */
  border-width: 2px;
}

/* ãƒ›ãƒãƒ¼æ™‚ã®æ˜ã‚‹ã•èª¿æ•´ */
.level-item.official.dlc:hover {
  background: linear-gradient(135deg, #162b32 0%, #2a4853 50%, #38667a 100%) !important;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0, 210, 211, 0.5) !important;
}

/* ã‚¿ã‚¤ãƒˆãƒ«æ–‡å­— */
.level-item.official.dlc h4 {
  color: #00d2d3 !important;
  text-shadow: 0 0 8px rgba(0, 210, 211, 0.6); /* ã»ã‚“ã®ã‚Šç™ºå…‰ */
  font-family: var(--font); /* ãƒ•ã‚©ãƒ³ãƒˆã‚’çµ±ä¸€ */
  letter-spacing: 0.05em;
}

/* ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« */
.level-item.official.dlc .sub-title {
  color: #a8dadc !important; /* å°‘ã—é’ã¿ãŒã‹ã£ãŸç™½ */
}

/* ä½œè€…å */
.level-item.official.dlc .author-name {
  color: #6c8a96 !important;
}
/* Secret Code Area (Gridã®å…¨åˆ—ã‚’ä½¿ã†ãƒ•ãƒƒã‚¿ãƒ¼çš„ãªé…ç½®) */
.secret-code-area {
  grid-column: 1 / -1; /* æ¨ªå¹…ã„ã£ã±ã„ */
  margin-top: 40px;
  padding: 30px;
  background: rgba(0, 0, 0, 0.2);
  border: 2px dashed #555;
  border-radius: 12px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.secret-label {
  font-size: 14px;
  font-weight: bold;
  color: #888;
  letter-spacing: 0.1em;
}

.secret-input-wrapper {
  display: flex;
  gap: 10px;
  max-width: 400px;
  width: 100%;
}

.secret-input-wrapper input {
  flex: 1;
  padding: 12px;
  font-size: 16px;
  border: 2px solid #555;
  background: #222;
  color: #fff;
  border-radius: 6px;
  text-align: center;
  font-family: monospace;
  letter-spacing: 0.1em;
  outline: none;
  transition: all 0.2s;
}

.secret-input-wrapper input:focus {
  border-color: var(--accent);
  background: #333;
}

.secret-input-wrapper.input-error input {
  border-color: #ff4757 !important;
  color: #ff4757 !important;
  background: rgba(255, 71, 87, 0.1) !important;
}

.secret-input-wrapper.input-error {
  animation: shakeError 0.4s ease-in-out;
}

@keyframes shakeError {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

